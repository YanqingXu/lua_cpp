---
description: "建立现代C++版Lua解释器的项目治理原则和开发指导方针"
---

# /constitution - 项目宪法建立

你正在参与一个现代C++版本的Lua解释器项目开发。使用这个提示来建立项目的核心原则和开发指导方针。

## 项目背景

- **参考项目1**: `lua_c_analysis` - Lua 5.1.5的深度中文注释版，提供完整的技术文档和实现分析
- **参考项目2**: `lua_with_cpp` - 现有的C++版Lua解释器半成品，提供现代C++架构基础
- **目标**: 构建一个生产级、现代化的C++版Lua 5.1.5解释器

## 需要建立的核心原则

### 1. 代码质量标准
- 采用C++17/20最佳实践和现代特性
- RAII内存管理和智能指针使用
- 类型安全和异常安全设计
- 零成本抽象和编译时优化

### 2. 测试和质量保证
- 100%自动化测试覆盖率要求
- 性能基准测试和回归检测
- Lua 5.1.5完全兼容性验证
- 内存安全和泄漏检测

### 3. 性能要求
- 目标微秒级响应时间
- 内存效率优化
- 零拷贝设计原则
- 与原生Lua性能对等

### 4. 兼容性要求
- 严格遵循Lua 5.1.5语法和语义
- API接口完全兼容
- 标准库行为一致性
- 错误处理机制兼容

### 5. 开发流程规范
- 测试驱动开发(TDD)
- 代码审查机制
- 持续集成和部署
- 文档同步更新

## 技术架构原则

### 现代C++设计
- 优先使用栈分配和RAII
- 智能指针管理动态内存
- 模板元编程实现类型安全
- 移动语义优化性能

### 模块化设计
- 清晰的模块边界和接口
- 依赖注入和控制反转
- 插件化架构支持扩展
- 单一职责和开闭原则

### 错误处理策略
- 异常安全保证
- 资源管理的RAII模式
- 错误传播机制
- 调试信息完整性

请根据这些要求创建详细的项目宪法文档，确保涵盖所有关键的开发原则和技术标准。

使用 `{SCRIPT}` 来执行项目脚本，使用 `$ARGUMENTS` 来处理命令参数。
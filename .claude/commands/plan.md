---
description: "创建现代C++版Lua解释器的技术实现计划"
---

使用 `/plan` 命令来生成现代C++版Lua解释器的详细技术实现计划。

## 技术栈建议

### 核心技术
- **编程语言**: C++17/20 (利用现代特性如概念、模块、协程等)
- **构建系统**: CMake 3.20+ (跨平台支持)
- **测试框架**: Google Test + Google Benchmark
- **代码分析**: Clang-Tidy + Static Analysis
- **性能分析**: Valgrind, Perf, 内置性能计数器

### 设计原则
1. **现代C++优先** - 充分利用RAII、智能指针、移动语义等
2. **类型安全** - 使用强类型系统和模板元编程
3. **内存安全** - 避免原始指针，使用现代内存管理
4. **性能导向** - 零成本抽象，编译时优化
5. **可测试性** - 模块化设计，依赖注入

### 架构组件
- **前端**: 词法分析器、语法分析器、AST
- **中端**: 字节码生成器、优化器
- **后端**: 虚拟机、垃圾回收器
- **运行时**: 对象系统、标准库、C++ API

参考现有项目：
- 从 `lua_c_analysis` 学习Lua内部机制和最佳实践
- 从 `lua_with_cpp` 继承已有的C++架构和代码结构
- 保持与Lua 5.1.5的完全兼容性

使用 `{SCRIPT}` 执行设置脚本，`$ARGUMENTS` 处理技术选择参数。

执行 `/plan $ARGUMENTS` 来制定具体的实现计划。